<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.min.css" />
        <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap-theme.min.css" />
        <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <title>Doug Bell</title>
        <style type="text/css">
            article > hgroup > h1,
            main > hgroup > h1
            {
                border-bottom: 4px solid #045578;
            }
            header aside {
                margin-top: 0;
                font-size: 12pt;
            }
            nav#tags h1 {
                font-size: 14pt;
            }
        </style>
            <link rel="alternate" href="/blog/index.atom" type="application/atom+xml" />
            <link rel="alternate" href="/blog/index.rss" type="application/rss+xml" />
    </head>
    <body>
        <header>
            <nav class="navbar navbar-default navbar-static-top" role="navigation">
                <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#top-navbar-collapse-1">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/">Doug Bell</a>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="top-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                            <li><a href="/index.html">Blog</a></li>
                            <li><a href="/presentations.html">Presentations</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <div class="main container">
            
<div class="row">

    <div class="col-md-9">
        <main>
            <article>
                <header>
                    <h1><a href="/blog/2012/10/15/chicago.pm-report-project-night-alien-base.html">Chicago.PM Report - Project Night: Alien::Base</a></h1>
                    <aside>
                        <p><time datetime="2012-10-15">
                            Posted on 2012-10-15
                        </time>
                        by preaction</p>
                    </aside>
                    <div class="alert alert-info">
                        <p>Originally posted as:</p>
                        <ul>
                            <li><a class="alert-link" href="http://blogs.perl.org/users/preaction/2013/05/chicagopm---beyond-grep---expanding-the-programmer-toolset.html">
                                <em>Chicago.PM Report - Project Night: Alien::Base</em> on blogs.perl.org.
                            </a></li>
                        </ul>
                    </div>
                </header>
                <p>This month's project night focused on Joel Berger's Alien::Base module. The
final bugs are either squashed or very close, and we got an introduction to how
the whole thing works.</p>

<hr />

<p>I learned some interesting things about DynaLoader that helped cement the idea
that it's an interface on to the system's dynamic linker. I've never dealt with
DynaLoader from the Perl side of things, except when it broke, and I would
solve those problems in system-specific ways. I learned that DynaLoader could
solve those problems in a cross-platform way.</p>

<p>I started writing my own Alien::Base module for libusb, but unfortunately ran
out of time. We had some interesting side-discussion on human interface devices
and augmented reality.</p>

<p>In two weeks, I'll be <a href="http://www.meetup.com/Windy-City-Perl-mongers-Meetup/events/85508372/">giving a talk on scripting Git with
Perl</a>.
Come on down and check it out!</p>

            </article>
            <article>
                <header>
                    <h1><a href="/blog/2012/10/07/run-time-class-composition-with-moose.html">Run-time Class Composition With Moose</a></h1>
                    <aside>
                        <p><time datetime="2012-10-07">
                            Posted on 2012-10-07
                        </time>
                        by preaction</p>
                    </aside>
                    <div class="alert alert-info">
                        <p>Originally posted as:</p>
                        <ul>
                            <li><a class="alert-link" href="http://blogs.perl.org/users/preaction/2012/10/run-time-class-composition-with-moose.html">
                                <em>Run-time Class Composition With Moose</em> on blogs.perl.org.
                            </a></li>
                        </ul>
                    </div>
                </header>
                <p>Moose is great! At its very basic, it simplifies the boilerplate required to
create Perl objects immensely, providing attributes with type constraints,
method modifiers for semantic enhancement, and role-based class composition for
better code re-use.</p>

<p>Moose is built on top of Class::MOP. MOP stands for Meta-Object Protocol. A
meta-object is an object that describes an object. So, each attribute and
method in your class has a corresponding entry in the meta-object describing
it. The meta-object is where you can find out what type constraints are on an
attribute, or what methods a class has available.</p>

<p>Since the meta-object is a Plain Old Perl Object, we can call methods on it at
runtime. Using those meta-object methods to add an attribute would modify our
object, adding that attribute to the object. Using Class::MOP, we can compose
classes at runtime!</p>

<hr />

<p>I have recently used this to great effect in a custom dependency injection and
configuration framework we have at Bank of America. By adding a "with" key to
the configuration YAML file, the DI will create a new, anonymous class that
composes the roles specified.</p>

<pre><code>{
    name: "Repository",
    class: "Bank::HistoricalData::DailyRepository",
    with: [ "Bank::Role::FlattenIntraday", "Bank::Role::CalculateHighLow" ],
    constructor_args: { }
}
</code></pre>

<p>So, when I ask the DI for the "Repository" object, it will get the meta-object
for Bank::HistoricalData::DailyRepository, create an anonymous class that
extends Bank::HistoricalData::DailyRepository, and then compose the two roles
into the new class.</p>

<p>The code to do all this is extremely short:</p>

<pre><code>my $class = $conf-&gt;{class};
my $meta = Moose::Meta::Class-&gt;create_anon_class( 
    superclasses =&gt; [ $class ],
    roles =&gt; $conf-&gt;{with},
);
$meta-&gt;make_immutable; # for performance
my $object = $meta-&gt;name-&gt;new( %{ $conf-&gt;{constructor_args} } );
return $object;
</code></pre>

<p>If a lot of objects end up composing the same roles, I can create a concrete
class to get a bit of a performance boost. Since I create a new, anonymous
meta-class, I don't have to worry about the class I'm extending being modified,
or being made mutable again ($class->meta->make_immutable speeds up a lot of
things, but doesn't allow us to add attributes or methods).</p>

<p>With this, I can be a lot more flexible about my dependencies, adding whatever
role I want to change their behavior whenever I need.</p>

            </article>
            <article>
                <header>
                    <h1><a href="/blog/2012/09/27/chicago.pm-report-app-services-by-sean-blanton.html">Chicago.PM Report - App::Services by Sean Blanton</a></h1>
                    <aside>
                        <p><time datetime="2012-09-27">
                            Posted on 2012-09-27
                        </time>
                        by preaction</p>
                    </aside>
                    <div class="alert alert-info">
                        <p>Originally posted as:</p>
                        <ul>
                            <li><a class="alert-link" href="http://blogs.perl.org/users/preaction/2012/09/chicagopm-report---appservices-by-sean-blanton.html">
                                <em>Chicago.PM Report - App::Services by Sean Blanton</em> on blogs.perl.org.
                            </a></li>
                        </ul>
                    </div>
                </header>
                <p>This month's technical presentation at <a href="http://chicago.pm.org">Chicago Perl
Mongers</a> was about <a href="http://seanblanton.com">Sean
Blanton</a>'s project called
<a href="https://github.com/sblanton/App-Services">App::Services</a>. It's an interesting
project that uses <a href="http://search.cpan.org/perldoc?Bread::Board">Bread::Board</a>
to access resources like databases, logging, ssh, and others.</p>

<hr />

<p>Along the way, we discussed logging practices (most of us are using
<a href="http://search.cpan.org/perldoc?Log%3A%3ALog4perl">Log::Log4perl</a>), and the
best way to get a Perl module ready for CPAN (I suggested using
<a href="http://search.cpan.org/perldoc?Module%3A%3ABuild">Module::Build</a> directly, but
<a href="http://search.cpan.org/perldoc?Dist::Zilla">Dist::Zilla</a> outvoted me).</p>

<p>Sean mentioned in passing the <a href="http://saltstack.org">Salt stack</a> for executing
commands across multiple machines, which looks like a very interesting
alternative to more detailed tools like Puppet or Chef. Salt seems to be just a
simple way to execute commands on multiple machines. Those commands could be
administrative (restart httpd), or they could be the application.</p>

<p>One other very interesting thing from App::Services was providing a role for
the larger system to use. So one creates App::Service::Log::Log4perl and
App::Service::Log::Role, and in other services you consume the
App::Service::Log::Role and then can use the Log4perl service. What's
interesting about this is that the role is provided alongside the logging
service, it isn't something that you have to create yourself. Doing it this way
improves interoperability and simplifies adoption by giving you the tedious
bits already. It's the difference between "Here's a service, figure out how to
use it best" and "Here's a service, and here's a good way to use it" (I've been
doing something similar by providing Test::MockObject implementations of my
modules for testing purposes in the same distribution as the module itself. An
"official" mock object).</p>

<p>In two weeks we have another project night, which I'm hoping is as productive
as the last. If you're in the Chicago area, check us out on the <a href="http://www.meetup.com/Windy-City-Perl-mongers-Meetup/">Chicago Perl
Mongers meetup page</a>.</p>

            </article>
            <article>
                <header>
                    <h1><a href="/blog/2012/09/23/plan-software-to-live-forever.html">Chicago.PM - Beyond grep - Expanding the Programmer Toolset</a></h1>
                    <aside>
                        <p><time datetime="2012-09-23">
                            Posted on 2012-09-23
                        </time>
                        by preaction</p>
                    </aside>
                    <div class="alert alert-info">
                        <p>Originally posted as:</p>
                        <ul>
                            <li><a class="alert-link" href="http://blogs.perl.org/users/preaction/2012/09/plan-software-to-live-forever.html">
                                <em>Chicago.PM - Beyond grep - Expanding the Programmer Toolset</em> on blogs.perl.org.
                            </a></li>
                        </ul>
                    </div>
                </header>
                <p>How often have I told myself, "I'll kludge this now and rewrite it later"? And
how many times did I actually go back and rewrite that kludgy bit? "Too often"
and "not enough". Many job postings include the phrase "update legacy
applications," as a euphemism for "rewrite poorly-designed spaghetti." The Y2K
problem was a huge exercise in code out-living the developer's plan, with a
healthy dose of cargo-culting thrown in. Lately, I've been learning to plan for
a likely possibility: My code will survive to haunt my bug lists and my resume
for a long time.</p>

<hr />

<p>We developers are a lazy lot, it's one of our greatest strengths. But like all
virtues, it is a double-edged sword that must be wielded responsibly. Laziness
is defined as maximum gain for minimal effort. For laziness's sake, I write
automated tests to avoid manual testing, I build a development server that
mimics production closely so I don't get woken up at 2:00 am when my code blows
up, I write documentation that explains the design of the software so I don't
have to trace through layers of code to figure it out, and anything else I can
do to make sure I don't have to work as hard solving the same problem in the
future.</p>

<p>Automated tests are the programmer's best friend. How do I know my code works?
By running it. How do I know it works every time I change something? By running
it again. Automated tests are simply running the code, controlling the input
and checking the output. Since I write tests once according to expected input
and output, I can refactor the entire program and be absolutely sure it works
for that set of input. I don't need to test manually, clicking everywhere or
preparing input on-the-fly, which saves me a lot of time in the long run
(because this code will live forever).</p>

<p>A development server is another necessity for laziness. At a former employer I
instituted a policy: All custom client projects included renting a
development/staging server, no exceptions. This staging server could be
completely destroyed and rebuilt with zero consequences. Our deployment
processes were automated (more laziness) to make it easy to recover from
mistakes. Once our automated tests passed, the clients had a place they could
verify the expected behavior and see their ideas in action before releasing the
code on to an important, production system. We instituted this policy from
learning our lesson: Our laptops were never the same as the production server,
so we needed some place that was. Deploying code directly to production is only
rarely without unforeseen consequences.</p>

<p>I've been called a hero a couple times now. I don't believe or understand why,
but I've noticed it's always after I mention how much I enjoy writing
documentation. Writing documentation is like explaining my code to someone
else, usually future me: It forces me to think critically about the code, how
it works, and what side-effects and edge-cases it has. Every time I go back to
write documentation I've found bugs in my code: incorrect assumptions,
inelegant algorithms, or undesired side-effects. Usually, the first other
person who reads them finds even more: things I didn't think of, or things I
thought would never be a problem (famous last words). Writing the documentation
gets me out of the code mindset and into the design mindset, and well-designed
code is code that will live forever.</p>

<p>There is nothing more boring than a solved problem. By making sure I have
automated tests, a sandbox environment, good documentation, I can make
maintenance easier, which is the true definition of laziness: Maximum gain for
minimum effort.</p>

            </article>
            <article>
                <header>
                    <h1><a href="/blog/2012/09/15/chicago.pm-report-app-prima-repl.html">Chicago.PM Report - App-Prima-REPL</a></h1>
                    <aside>
                        <p><time datetime="2012-09-15">
                            Posted on 2012-09-15
                        </time>
                        by preaction</p>
                    </aside>
                    <div class="alert alert-info">
                        <p>Originally posted as:</p>
                        <ul>
                            <li><a class="alert-link" href="http://blogs.perl.org/users/preaction/2012/09/chicagopm-report---app-prima-repl.html">
                                <em>Chicago.PM Report - App-Prima-REPL</em> on blogs.perl.org.
                            </a></li>
                        </ul>
                    </div>
                </header>
                <p>We had our first project night at <a href="http://chicago.pm.org">Chicago.PM</a> this
week, where we discussed ideas and wrote code for a Perl REPL GUI program
(<a href="http://github.com/run4flat/App-Prima-REPL">App-Prima-REPL on Github</a>) by
David Mertens built on <a href="http://www.prima.eu.org/">Prima</a>.</p>

<hr />

<p>There were some small ideas to make the program more user-friendly, and some
larger ideas like an IRC client and guided tutorials based on the same format
that <a href="http://perltuts.com">http://perltuts.com</a> uses.</p>

<p>I'm hoping that if I keep saying this, I'll be embarrassed into doing it: I
would really love to see the <a href="http://rubykoans.com">Ruby Koans</a> translated into
Perl (in spirit, if not in actual content). I've started writing down ideas for
chapters, but there is a lot of content to cover.</p>

<p>I added a <code>-I</code> flag and a <code>-M</code> flag to the <code>prima-repl</code> command-line launcher
that work as close to perl's flags as I could get. This is one of the things I
love about <code>prove</code> and <code>plackup:</code> Where it makes sense, they work like perl
does. So now the <code>prima-repl</code> can have subs and modules imported on the
command-line.</p>

<p>Altogether it was a wonderfully productive evening and I'm looking forward to
the next one. </p>

            </article>
        </main>
        <ul class="pager">
            <li class="previous ">
                <a rel="next" href="/blog/page-4.html">&larr; Older</a>
            </li>
            <li class="next ">
                <a rel="prev" href="/blog/page-2.html">Newer &rarr;</a>
            </li>
        </ul>
    </div>

    <div class="col-md-3">
        <nav id="tags">
            <h1>Tags</h1>
            <ul class="list-inline">
                <li><a href="/blog/tag/chicago.pm/index.html">chicago.pm</a></li>
                <li><a href="/blog/tag/error/index.html">error</a></li>
                <li><a href="/blog/tag/git/index.html">git</a></li>
                <li><a href="/blog/tag/moose/index.html">moose</a></li>
                <li><a href="/blog/tag/mysql/index.html">mysql</a></li>
                <li><a href="/blog/tag/perl/index.html">perl</a></li>
                <li><a href="/blog/tag/rants/index.html">rants</a></li>
                <li><a href="/blog/tag/software/index.html">software</a></li>
                <li><a href="/blog/tag/webgui/index.html">webgui</a></li>
                <li><a href="/blog/tag/xs/index.html">xs</a></li>
            </ul>
        </nav>
    </div>

</div>

        </div>
    </body>
</html>
